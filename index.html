<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <meta property="og:type" content="website" />
  <meta property="og:title" content="Grace Reminders" />
  <meta property="og:description" content="grace calendar invite" />
  <meta property="og:image" content="https://raw.githubusercontent.com/JRDN-R/jew/5c3e20f9b9aae0d8e867f268945a7ffea0cbf9dd/imgpre.jpeg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:url" content="https://jrdn-r.github.io/jew/" />
  <meta name="twitter:card" content="summary_large_image" />

  <title>Grace Reminders</title>
</head>

<body style="font-family:-apple-system,system-ui,Arial,sans-serif;padding:20px;">
  <audio id="bg" preload="auto" autoplay loop playsinline>
    <source src="https://raw.githubusercontent.com/JRDN-R/jew/9818c3b1f2f16445289063c5a4f814fd36d0d5b8/pny.mp3" type="audio/mpeg">
  </audio>

  <p id="status">Opening Calendarâ€¦</p>

  <p id="fallback" style="display:none;">
    <button id="tap" style="font-size:16px;padding:12px 16px;">
      Tap to play audio + open Calendar
    </button>
  </p>

  <p style="margin-top:14px;">
    <a id="sub" href="#">Subscribe (Apple Calendar)</a>
  </p>
  <p>
    <a id="dl" href="#">Download / Open .ics</a>
  </p>

  <script>
    const WEBCAL_URL = "webcal://raw.githubusercontent.com/JRDN-R/jew/a3457acd2701c993dec72501f6a6234db9094225/grace.ics";
    const HTTPS_ICS  = "https://raw.githubusercontent.com/JRDN-R/jew/a3457acd2701c993dec72501f6a6234db9094225/grace.ics";

    document.getElementById("sub").href = WEBCAL_URL;
    document.getElementById("dl").href  = HTTPS_ICS;

    function goCalendar() {
      window.location.replace(WEBCAL_URL);
      setTimeout(() => { window.location.href = WEBCAL_URL; }, 250);
    }

    const audio = document.getElementById("bg");

    // Try to start audio immediately; if it works, jump to calendar.
    // If blocked (common on iOS), show a single tap button that starts audio then opens calendar.
    Promise.resolve()
      .then(() => audio.play())
      .then(() => setTimeout(goCalendar, 350))
      .catch(() => {
        document.getElementById("status").textContent = "Tap required to start audio.";
        document.getElementById("fallback").style.display = "block";
      });

    document.getElementById("tap").addEventListener("click", async () => {
      try { await audio.play(); } catch (e) {}
      goCalendar();
    });
  </script>
</body>
</html>
